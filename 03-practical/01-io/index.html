
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://ericmjl.github.io/Network-Analysis-Made-Simple/03-practical/01-io/">
      
      
        <link rel="prev" href="../../02-algorithms/03-structures/">
      
      
        <link rel="next" href="../02-testing/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.7">
    
    
      
        <title>Chapter 7: Graph I/O - Network Analysis Made Simple</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/nb_mods.css">
    
      <link rel="stylesheet" href="../../css/apidocs.css">
    
      <link rel="stylesheet" href="../../css/ansi-colours.css">
    
      <link rel="stylesheet" href="../../css/jupyter-cells.css">
    
      <link rel="stylesheet" href="../../css/pandas-dataframe.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Network Analysis Made Simple" class="md-header__button md-logo" aria-label="Network Analysis Made Simple" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M96 0C43 0 0 43 0 96v320c0 53 43 96 96 96h320c17.7 0 32-14.3 32-32s-14.3-32-32-32v-64c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H96m0 384h256v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32m32-240c0-8.8 7.2-16 16-16h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16m16 48h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Network Analysis Made Simple
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Chapter 7: Graph I/O
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ericmjl/Network-Analysis-Made-Simple" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    ericmjl/Network-Analysis-Made-Simple
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Network Analysis Made Simple" class="md-nav__button md-logo" aria-label="Network Analysis Made Simple" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M96 0C43 0 0 43 0 96v320c0 53 43 96 96 96h320c17.7 0 32-14.3 32-32s-14.3-32-32-32v-64c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H96m0 384h256v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32m32-240c0-8.8 7.2-16 16-16h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16m16 48h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16"/></svg>

    </a>
    Network Analysis Made Simple
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ericmjl/Network-Analysis-Made-Simple" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    ericmjl/Network-Analysis-Made-Simple
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Network Analysis Made Simple
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Network Analysis Made Simple
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Preface
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Preface
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-preface/01-setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-preface/02-prereqs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Prerequisites
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-preface/03-goals/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Learning Goals
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Section 1: Introduction
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Section 1: Introduction
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01-introduction/01-graphs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chapter 1: Introduction to Graphs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01-introduction/02-networkx-intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chapter 2: The NetworkX API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01-introduction/03-viz/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chapter 3: Graph Visualization
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Section 2: Algorithms
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Section 2: Algorithms
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02-algorithms/01-hubs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chapter 4: Hubs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02-algorithms/02-paths/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chapter 5: Paths
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02-algorithms/03-structures/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chapter 6: Structures
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Section 3: Practical Matters
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Section 3: Practical Matters
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Chapter 7: Graph I/O
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Chapter 7: Graph I/O
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#graph-data-as-tables" class="md-nav__link">
    <span class="md-ellipsis">
      Graph Data as Tables
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Graph Data as Tables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#node-set-as-tables" class="md-nav__link">
    <span class="md-ellipsis">
      Node set as tables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edge-set-as-tables" class="md-nav__link">
    <span class="md-ellipsis">
      Edge set as tables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combined-representation" class="md-nav__link">
    <span class="md-ellipsis">
      Combined Representation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dataset" class="md-nav__link">
    <span class="md-ellipsis">
      Dataset
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#graph-model" class="md-nav__link">
    <span class="md-ellipsis">
      Graph Model
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Graph Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-networkx-graph-from-pandas-edgelist" class="md-nav__link">
    <span class="md-ellipsis">
      Create NetworkX graph from pandas edgelist
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inspect-the-graph" class="md-nav__link">
    <span class="md-ellipsis">
      Inspect the graph
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annotate-node-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      Annotate node metadata
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-filter-graph-edges" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise: Filter graph edges
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#visualize-using-geoplot" class="md-nav__link">
    <span class="md-ellipsis">
      Visualize using GeoPlot
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pickling-graphs" class="md-nav__link">
    <span class="md-ellipsis">
      Pickling Graphs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pickling Graphs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise-checking-graph-integrity" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise: checking graph integrity
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-text-formats" class="md-nav__link">
    <span class="md-ellipsis">
      Other text formats
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solutions" class="md-nav__link">
    <span class="md-ellipsis">
      Solutions
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02-testing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chapter 8: Testing
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Section 4: Advanced Topics
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Section 4: Advanced Topics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../04-advanced/01-bipartite/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chapter 9: Bipartite Graphs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../04-advanced/02-linalg/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chapter 10: Linear Algebra
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../04-advanced/03-stats/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chapter 11: Statistical Inference
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Section 5: Case Studies
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Section 5: Case Studies
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../05-casestudies/01-gameofthrones/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chapter 12: Game of Thrones
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../05-casestudies/02-airport/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chapter 13: Airport Network
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../learn-more/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Further Learning
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Development
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../devdocs/style/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Style Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#graph-data-as-tables" class="md-nav__link">
    <span class="md-ellipsis">
      Graph Data as Tables
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Graph Data as Tables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#node-set-as-tables" class="md-nav__link">
    <span class="md-ellipsis">
      Node set as tables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edge-set-as-tables" class="md-nav__link">
    <span class="md-ellipsis">
      Edge set as tables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combined-representation" class="md-nav__link">
    <span class="md-ellipsis">
      Combined Representation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dataset" class="md-nav__link">
    <span class="md-ellipsis">
      Dataset
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#graph-model" class="md-nav__link">
    <span class="md-ellipsis">
      Graph Model
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Graph Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-networkx-graph-from-pandas-edgelist" class="md-nav__link">
    <span class="md-ellipsis">
      Create NetworkX graph from pandas edgelist
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inspect-the-graph" class="md-nav__link">
    <span class="md-ellipsis">
      Inspect the graph
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annotate-node-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      Annotate node metadata
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-filter-graph-edges" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise: Filter graph edges
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#visualize-using-geoplot" class="md-nav__link">
    <span class="md-ellipsis">
      Visualize using GeoPlot
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pickling-graphs" class="md-nav__link">
    <span class="md-ellipsis">
      Pickling Graphs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pickling Graphs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise-checking-graph-integrity" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise: checking graph integrity
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-text-formats" class="md-nav__link">
    <span class="md-ellipsis">
      Other text formats
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solutions" class="md-nav__link">
    <span class="md-ellipsis">
      Solutions
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>Chapter 7: Graph I/O</h1>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script>
(function() {
  function addWidgetsRenderer() {
    var requireJsScript = document.createElement('script');
    requireJsScript.src = 'https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js';

    var mimeElement = document.querySelector('script[type="application/vnd.jupyter.widget-view+json"]');
    var jupyterWidgetsScript = document.createElement('script');
    var widgetRendererSrc = 'https://unpkg.com/@jupyter-widgets/html-manager@*/dist/embed-amd.js';
    var widgetState;

    // Fallback for older version:
    try {
      widgetState = mimeElement && JSON.parse(mimeElement.innerHTML);

      if (widgetState && (widgetState.version_major < 2 || !widgetState.version_major)) {
        widgetRendererSrc = 'jupyter-js-widgets@*/dist/embed.js';
      }
    } catch(e) {}

    jupyterWidgetsScript.src = widgetRendererSrc;

    document.body.appendChild(requireJsScript);
    document.body.appendChild(jupyterWidgetsScript);
  }

  document.addEventListener('DOMContentLoaded', addWidgetsRenderer);
}());
</script>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="https://mybinder.org/v2/gh/ericmjl/Network-Analysis-Made-Simple/master?urlpath=lab%2Ftree%2Fnotebooks%2F03-practical%2F01-io.ipynb"><img alt="Binder" src="https://mybinder.org/badge_logo.svg" /></a></p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="o">%</span><span class="n">load_ext</span> <span class="n">autoreload</span>
<span class="o">%</span><span class="n">autoreload</span> <span class="mi">2</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
<span class="o">%</span><span class="n">config</span> <span class="n">InlineBackend</span><span class="o">.</span><span class="n">figure_format</span> <span class="o">=</span> <span class="s1">&#39;retina&#39;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">warnings</span>

<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
</code></pre></div>

</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="introduction">Introduction</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">IPython.display</span><span class="w"> </span><span class="kn">import</span> <span class="n">YouTubeVideo</span>

<span class="n">YouTubeVideo</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;3sJnTpeFXZ4&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s2">&quot;100%&quot;</span><span class="p">)</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_html rendered_html output_subarea output_execute_result">
<iframe allowfullscreen="" frameborder="0" height="300" src="https://www.youtube.com/embed/3sJnTpeFXZ4" width="100%"></iframe>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In order to get you familiar with graph ideas,
I have deliberately chosen to steer away from
the more pedantic matters
of loading graph data to and from disk.
That said, the following scenario will eventually happen,
where a graph dataset lands on your lap,
and you'll need to load it in memory 
and start analyzing it.</p>
<p>Thus, we're going to go through graph I/O,
specifically the APIs on how to convert
graph data that comes to you
into that magical NetworkX object <code>G</code>.</p>
<p>Let's get going!</p>
<h2 id="graph-data-as-tables">Graph Data as Tables</h2>
<p>Let's recall what we've learned in the introductory chapters.
Graphs can be represented using two <strong>sets</strong>:</p>
<ul>
<li>Node set</li>
<li>Edge set</li>
</ul>
<h3 id="node-set-as-tables">Node set as tables</h3>
<p>Let's say we had a graph with 3 nodes in it: <code>A, B, C</code>.
We could represent it in plain text, computer-readable format:</p>
<div class="highlight"><pre><span></span><code>A
B
C
</code></pre></div>
<p>Suppose the nodes also had metadata.
Then, we could tag on metadata as well:</p>
<div class="highlight"><pre><span></span><code>A, circle, 5
B, circle, 7
C, square, 9
</code></pre></div>
<p>Does this look familiar to you?
Yes, node sets can be stored in CSV format,
with one of the columns being node ID,
and the rest of the columns being metadata.</p>
<h3 id="edge-set-as-tables">Edge set as tables</h3>
<p>If, between the nodes, we had 4 edges (this is a directed graph),
we can also represent those edges in plain text, computer-readable format:</p>
<div class="highlight"><pre><span></span><code>A, C
B, C
A, B
C, A
</code></pre></div>
<p>And let's say we also had other metadata,
we can represent it in the same CSV format:</p>
<div class="highlight"><pre><span></span><code>A, C, red
B, C, orange
A, B, yellow
C, A, green
</code></pre></div>
<p>If you've been in the data world for a while,
this should not look foreign to you.
Yes, edge sets can be stored in CSV format too!
Two of the columns represent the nodes involved in an edge,
and the rest of the columns represent the metadata.</p>
<h3 id="combined-representation">Combined Representation</h3>
<p>In fact, one might also choose to combine
the node set and edge set tables together in a merged format:</p>
<div class="highlight"><pre><span></span><code>n1, n2, colour, shape1, num1, shape2, num2
A,  C,  red,    circle, 5,    square, 9
B,  C,  orange, circle, 7,    square, 9
A,  B,  yellow, circle, 5,    circle, 7
C,  A,  green,  square, 9,    circle, 5
</code></pre></div>
<p>In this chapter, the datasets that we will be looking at
are going to be formatted in both ways.
Let's get going.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="dataset">Dataset</h2>
<p>We will be working with the Divvy bike sharing dataset.</p>
<p>&gt; Divvy is a bike sharing service in Chicago.
&gt; Since 2013, Divvy has released their bike sharing dataset to the public.
&gt; The 2013 dataset is comprised of two files: 
&gt; - <code>Divvy_Stations_2013.csv</code>, containing the stations in the system, and
&gt; - <code>DivvyTrips_2013.csv</code>, containing the trips.</p>
<p>Let's dig into the data!</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pyprojroot</span><span class="w"> </span><span class="kn">import</span> <span class="n">here</span>
</code></pre></div>

</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Firstly, we need to unzip the dataset:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">zipfile</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nams.load_data</span><span class="w"> </span><span class="kn">import</span> <span class="n">datasets</span>

<span class="c1"># This block of code checks to make sure that a particular directory is present.</span>
<span class="k">if</span> <span class="s2">&quot;divvy_2013&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">datasets</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Unzipping the divvy_2013.zip file in the datasets folder.&quot;</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">datasets</span> <span class="o">/</span> <span class="s2">&quot;divvy_2013.zip&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">zip_ref</span><span class="p">:</span>
        <span class="n">zip_ref</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">datasets</span><span class="p">)</span>
</code></pre></div>

</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now, let's load in both tables.</p>
<p>First is the <code>stations</code> table:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="n">stations</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
    <span class="n">datasets</span> <span class="o">/</span> <span class="s2">&quot;divvy_2013/Divvy_Stations_2013.csv&quot;</span><span class="p">,</span>
    <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;online date&quot;</span><span class="p">],</span>
    <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">stations</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>id</th>
<th>name</th>
<th>latitude</th>
<th>longitude</th>
<th>dpcapacity</th>
<th>landmark</th>
<th>online date</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>5</td>
<td>State St &amp; Harrison St</td>
<td>41.873958</td>
<td>-87.627739</td>
<td>19</td>
<td>30</td>
<td>2013-06-28</td>
</tr>
<tr>
<th>1</th>
<td>13</td>
<td>Wilton Ave &amp; Diversey Pkwy</td>
<td>41.932500</td>
<td>-87.652681</td>
<td>19</td>
<td>66</td>
<td>2013-06-28</td>
</tr>
<tr>
<th>2</th>
<td>14</td>
<td>Morgan St &amp; 18th St</td>
<td>41.858086</td>
<td>-87.651073</td>
<td>15</td>
<td>163</td>
<td>2013-06-28</td>
</tr>
<tr>
<th>3</th>
<td>15</td>
<td>Racine Ave &amp; 18th St</td>
<td>41.858181</td>
<td>-87.656487</td>
<td>15</td>
<td>164</td>
<td>2013-06-28</td>
</tr>
<tr>
<th>4</th>
<td>16</td>
<td>Wood St &amp; North Ave</td>
<td>41.910329</td>
<td>-87.672516</td>
<td>15</td>
<td>223</td>
<td>2013-08-12</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="n">stations</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>id</th>
<th>latitude</th>
<th>longitude</th>
<th>dpcapacity</th>
<th>landmark</th>
<th>online date</th>
</tr>
</thead>
<tbody>
<tr>
<th>count</th>
<td>300.000000</td>
<td>300.000000</td>
<td>300.000000</td>
<td>300.000000</td>
<td>300.000000</td>
<td>300</td>
</tr>
<tr>
<th>mean</th>
<td>189.063333</td>
<td>41.896276</td>
<td>-87.648220</td>
<td>16.800000</td>
<td>192.013333</td>
<td>2013-08-13 22:48:00</td>
</tr>
<tr>
<th>min</th>
<td>5.000000</td>
<td>41.788746</td>
<td>-87.707857</td>
<td>11.000000</td>
<td>1.000000</td>
<td>2013-06-28 00:00:00</td>
</tr>
<tr>
<th>25%</th>
<td>108.750000</td>
<td>41.871814</td>
<td>-87.665824</td>
<td>15.000000</td>
<td>83.750000</td>
<td>2013-07-23 00:00:00</td>
</tr>
<tr>
<th>50%</th>
<td>196.500000</td>
<td>41.894611</td>
<td>-87.648626</td>
<td>15.000000</td>
<td>184.500000</td>
<td>2013-08-15 00:00:00</td>
</tr>
<tr>
<th>75%</th>
<td>276.250000</td>
<td>41.926397</td>
<td>-87.631810</td>
<td>19.000000</td>
<td>288.250000</td>
<td>2013-09-13 00:00:00</td>
</tr>
<tr>
<th>max</th>
<td>351.000000</td>
<td>41.978353</td>
<td>-87.580715</td>
<td>47.000000</td>
<td>440.000000</td>
<td>2013-10-29 00:00:00</td>
</tr>
<tr>
<th>std</th>
<td>99.484487</td>
<td>0.040952</td>
<td>0.023001</td>
<td>4.673987</td>
<td>120.534789</td>
<td>NaN</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now, let's load in the <code>trips</code> table.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="n">trips</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
    <span class="n">datasets</span> <span class="o">/</span> <span class="s2">&quot;divvy_2013/Divvy_Trips_2013.csv&quot;</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;starttime&quot;</span><span class="p">,</span> <span class="s2">&quot;stoptime&quot;</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">trips</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>trip_id</th>
<th>starttime</th>
<th>stoptime</th>
<th>bikeid</th>
<th>tripduration</th>
<th>from_station_id</th>
<th>from_station_name</th>
<th>to_station_id</th>
<th>to_station_name</th>
<th>usertype</th>
<th>gender</th>
<th>birthday</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>4118</td>
<td>2013-06-27 12:11:00</td>
<td>2013-06-27 12:16:00</td>
<td>480</td>
<td>316</td>
<td>85</td>
<td>Michigan Ave &amp; Oak St</td>
<td>28</td>
<td>Larrabee St &amp; Menomonee St</td>
<td>Customer</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr>
<th>1</th>
<td>4275</td>
<td>2013-06-27 14:44:00</td>
<td>2013-06-27 14:45:00</td>
<td>77</td>
<td>64</td>
<td>32</td>
<td>Racine Ave &amp; Congress Pkwy</td>
<td>32</td>
<td>Racine Ave &amp; Congress Pkwy</td>
<td>Customer</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr>
<th>2</th>
<td>4291</td>
<td>2013-06-27 14:58:00</td>
<td>2013-06-27 15:05:00</td>
<td>77</td>
<td>433</td>
<td>32</td>
<td>Racine Ave &amp; Congress Pkwy</td>
<td>19</td>
<td>Loomis St &amp; Taylor St</td>
<td>Customer</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr>
<th>3</th>
<td>4316</td>
<td>2013-06-27 15:06:00</td>
<td>2013-06-27 15:09:00</td>
<td>77</td>
<td>123</td>
<td>19</td>
<td>Loomis St &amp; Taylor St</td>
<td>19</td>
<td>Loomis St &amp; Taylor St</td>
<td>Customer</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr>
<th>4</th>
<td>4342</td>
<td>2013-06-27 15:13:00</td>
<td>2013-06-27 15:27:00</td>
<td>77</td>
<td>852</td>
<td>19</td>
<td>Loomis St &amp; Taylor St</td>
<td>55</td>
<td>Halsted St &amp; James M Rochford St</td>
<td>Customer</td>
<td>NaN</td>
<td>NaN</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">janitor</span>

<span class="n">trips_summary</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">trips</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">&quot;from_station_id&quot;</span><span class="p">,</span> <span class="s2">&quot;to_station_id&quot;</span><span class="p">])</span>
    <span class="o">.</span><span class="n">count</span><span class="p">()</span>
    <span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
    <span class="o">.</span><span class="n">select_columns</span><span class="p">([</span><span class="s2">&quot;from_station_id&quot;</span><span class="p">,</span> <span class="s2">&quot;to_station_id&quot;</span><span class="p">,</span> <span class="s2">&quot;trip_id&quot;</span><span class="p">])</span>
    <span class="o">.</span><span class="n">rename_column</span><span class="p">(</span><span class="s2">&quot;trip_id&quot;</span><span class="p">,</span> <span class="s2">&quot;num_trips&quot;</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div>

</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="n">trips_summary</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>from_station_id</th>
<th>to_station_id</th>
<th>num_trips</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>5</td>
<td>5</td>
<td>232</td>
</tr>
<tr>
<th>1</th>
<td>5</td>
<td>13</td>
<td>1</td>
</tr>
<tr>
<th>2</th>
<td>5</td>
<td>14</td>
<td>15</td>
</tr>
<tr>
<th>3</th>
<td>5</td>
<td>15</td>
<td>9</td>
</tr>
<tr>
<th>4</th>
<td>5</td>
<td>16</td>
<td>4</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="graph-model">Graph Model</h2>
<p>Given the data, if we wished to use a graph as a data model
for the number of trips between stations,
then naturally, nodes would be the stations,
and edges would be trips between them.</p>
<p>This graph would be directed,
as one could have more trips from station A to B
and less in the reverse.</p>
<p>With this definition,
we can begin graph construction!</p>
<h3 id="create-networkx-graph-from-pandas-edgelist">Create NetworkX graph from pandas edgelist</h3>
<p>NetworkX provides an extremely convenient way
to load data from a pandas DataFrame:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">networkx</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">nx</span>

<span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">from_pandas_edgelist</span><span class="p">(</span>
    <span class="n">df</span><span class="o">=</span><span class="n">trips_summary</span><span class="p">,</span>
    <span class="n">source</span><span class="o">=</span><span class="s2">&quot;from_station_id&quot;</span><span class="p">,</span>
    <span class="n">target</span><span class="o">=</span><span class="s2">&quot;to_station_id&quot;</span><span class="p">,</span>
    <span class="n">edge_attr</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;num_trips&quot;</span><span class="p">],</span>
    <span class="n">create_using</span><span class="o">=</span><span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="inspect-the-graph">Inspect the graph</h3>
<p>Once the graph is in memory,
we can inspect it to get out summary graph statistics.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_subarea output_stream output_stdout output_text">
<pre>
<code>DiGraph with 300 nodes and 44422 edges
</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You'll notice that the edge metadata have been added correctly: we have recorded in there the number of trips between stations.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="nb">list</span><span class="p">(</span><span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">))[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_text output_subarea output_execute_result">
<pre>
<code>[(5, 5, {'num_trips': 232}),
 (5, 13, {'num_trips': 1}),
 (5, 14, {'num_trips': 15}),
 (5, 15, {'num_trips': 9}),
 (5, 16, {'num_trips': 4})]</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>However, the node metadata is not present:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="nb">list</span><span class="p">(</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">))[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_text output_subarea output_execute_result">
<pre>
<code>[(5, {}), (13, {}), (14, {}), (15, {}), (16, {})]</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="annotate-node-metadata">Annotate node metadata</h3>
<p>We have rich station data on hand,
such as the longitude and latitude of each station,
and it would be a pity to discard it,
especially when we can potentially use it as part of the analysis
or for visualization purposes.
Let's see how we can add this information in.</p>
<p>Firstly, recall what the <code>stations</code> dataframe looked like:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="n">stations</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>id</th>
<th>name</th>
<th>latitude</th>
<th>longitude</th>
<th>dpcapacity</th>
<th>landmark</th>
<th>online date</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>5</td>
<td>State St &amp; Harrison St</td>
<td>41.873958</td>
<td>-87.627739</td>
<td>19</td>
<td>30</td>
<td>2013-06-28</td>
</tr>
<tr>
<th>1</th>
<td>13</td>
<td>Wilton Ave &amp; Diversey Pkwy</td>
<td>41.932500</td>
<td>-87.652681</td>
<td>19</td>
<td>66</td>
<td>2013-06-28</td>
</tr>
<tr>
<th>2</th>
<td>14</td>
<td>Morgan St &amp; 18th St</td>
<td>41.858086</td>
<td>-87.651073</td>
<td>15</td>
<td>163</td>
<td>2013-06-28</td>
</tr>
<tr>
<th>3</th>
<td>15</td>
<td>Racine Ave &amp; 18th St</td>
<td>41.858181</td>
<td>-87.656487</td>
<td>15</td>
<td>164</td>
<td>2013-06-28</td>
</tr>
<tr>
<th>4</th>
<td>16</td>
<td>Wood St &amp; North Ave</td>
<td>41.910329</td>
<td>-87.672516</td>
<td>15</td>
<td>223</td>
<td>2013-08-12</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The <code>id</code> column gives us the node ID in the graph,
so if we set <code>id</code> to be the index,
if we then also loop over each row,
we can treat the rest of the columns as dictionary keys
and values as dictionary values,
and add the information into the graph.</p>
<p>Let's see this in action.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="k">for</span> <span class="n">node</span><span class="p">,</span> <span class="n">metadata</span> <span class="ow">in</span> <span class="n">stations</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">metadata</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
</code></pre></div>

</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now, our node metadata should be populated.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="nb">list</span><span class="p">(</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">))[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_text output_subarea output_execute_result">
<pre>
<code>[(5,
  {'name': 'State St &amp; Harrison St',
   'latitude': 41.87395806,
   'longitude': -87.62773949,
   'dpcapacity': 19,
   'landmark': 30,
   'online date': Timestamp('2013-06-28 00:00:00')}),
 (13,
  {'name': 'Wilton Ave &amp; Diversey Pkwy',
   'latitude': 41.93250008,
   'longitude': -87.65268082,
   'dpcapacity': 19,
   'landmark': 66,
   'online date': Timestamp('2013-06-28 00:00:00')}),
 (14,
  {'name': 'Morgan St &amp; 18th St',
   'latitude': 41.858086,
   'longitude': -87.651073,
   'dpcapacity': 15,
   'landmark': 163,
   'online date': Timestamp('2013-06-28 00:00:00')}),
 (15,
  {'name': 'Racine Ave &amp; 18th St',
   'latitude': 41.85818061,
   'longitude': -87.65648665,
   'dpcapacity': 15,
   'landmark': 164,
   'online date': Timestamp('2013-06-28 00:00:00')}),
 (16,
  {'name': 'Wood St &amp; North Ave',
   'latitude': 41.910329,
   'longitude': -87.672516,
   'dpcapacity': 15,
   'landmark': 223,
   'online date': Timestamp('2013-08-12 00:00:00')})]</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In <code>nxviz</code>, a <code>GeoPlot</code> object is available
that allows you to quickly visualize
a graph that has geographic data.
However, being <code>matplotlib</code>-based,
it is going to be quickly overwhelmed
by the sheer number of edges.</p>
<p>As such, we are going to first filter the edges.</p>
<h3 id="exercise-filter-graph-edges">Exercise: Filter graph edges</h3>
<p>&gt; Leveraging what you know about how to manipulate graphs,
&gt; now try <em>filtering</em> edges.
&gt;</p>
<p><em>Hint: NetworkX graph objects can be deep-copied using <code>G.copy()</code>:</em></p>
<div class="highlight"><pre><span></span><code><span class="n">G_copy</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</code></pre></div>
<p><em>Hint: NetworkX graph objects also let you remove edges:</em></p>
<div class="highlight"><pre><span></span><code><span class="n">G</span><span class="o">.</span><span class="n">remove_edge</span><span class="p">(</span><span class="n">node1</span><span class="p">,</span> <span class="n">node2</span><span class="p">)</span>  <span class="c1"># does not return anything</span>
</code></pre></div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">filter_graph</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">minimum_num_trips</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Filter the graph such that</span>
<span class="sd">    only edges that have minimum_num_trips or more</span>
<span class="sd">    are present.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">G_filtered</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">____</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">G</span><span class="o">.</span><span class="n">_____</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">____</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">d</span><span class="p">[</span><span class="n">___________</span><span class="p">]</span> <span class="o">&amp;</span><span class="n">lt</span><span class="p">;</span> <span class="n">___</span><span class="p">:</span>
            <span class="n">G_________</span><span class="o">.</span><span class="n">___________</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">G_filtered</span>


<span class="kn">from</span><span class="w"> </span><span class="nn">nams.solutions.io</span><span class="w"> </span><span class="kn">import</span> <span class="n">filter_graph</span>

<span class="n">G_filtered</span> <span class="o">=</span> <span class="n">filter_graph</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
</code></pre></div>

</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="visualize-using-geoplot">Visualize using GeoPlot</h3>
<p><code>nxviz</code> provides a GeoPlot object
that lets you quickly visualize geospatial graph data.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A note on geospatial visualizations:</p>
<p>&gt; As the creator of <code>nxviz</code>,
&gt; I would recommend using proper geospatial packages
&gt; to build custom geospatial graph viz,
&gt; such as <a href="http://pysal.org/"><code>pysal</code></a>.)
&gt; 
&gt; That said, <code>nxviz</code> can probably do what you need
&gt; for a quick-and-dirty view of the data.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">nxviz</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">nv</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">nv</span><span class="o">.</span><span class="n">geo</span><span class="p">(</span><span class="n">G_filtered</span><span class="p">,</span> <span class="n">node_color_by</span><span class="o">=</span><span class="s2">&quot;dpcapacity&quot;</span><span class="p">)</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_subarea output_stream output_stderr output_text">
<pre>
<code>/home/runner/work/Network-Analysis-Made-Simple/Network-Analysis-Made-Simple/.pixi/envs/default/lib/python3.11/site-packages/nxviz/encodings.py:42: MatplotlibDeprecationWarning: The get_cmap function was deprecated in Matplotlib 3.7 and will be removed in 3.11. Use ``matplotlib.colormaps[name]`` or ``matplotlib.colormaps.get_cmap()`` or ``pyplot.get_cmap()`` instead.
  cmap = get_cmap("viridis")
</code>
</pre>
</div>
</div>
<div class="output_area">
<div class="output_png output_subarea">
<img alt="No description has been provided for this image" height="389" src="output_34_1.png" width="269"/>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Does that look familiar to you? Looks quite a bit like Chicago, I'd say :)</p>
<p>Jesting aside, this visualization does help illustrate
that the majority of trips occur between stations that are
near the city center.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="pickling-graphs">Pickling Graphs</h2>
<p>Since NetworkX graphs are Python objects,
the canonical way to save them is by pickling them.</p>
<p>Here's an example in action:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">pickle</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;/tmp/divvy.pkl&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">pickle</span><span class="o">.</span><span class="n">HIGHEST_PROTOCOL</span><span class="p">)</span>
</code></pre></div>

</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>And just to show that it can be loaded back into memory:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;/tmp/divvy.pkl&quot;</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">G_loaded</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</code></pre></div>

</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="exercise-checking-graph-integrity">Exercise: checking graph integrity</h3>
<p>If you get a graph dataset as a pickle,
you should always check it against reference properties
to make sure of its data integrity.</p>
<p>&gt; Write a function that tests that the graph
&gt; has the correct number of nodes and edges inside it.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_graph_integrity</span><span class="p">(</span><span class="n">G</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test integrity of raw Divvy graph.&quot;&quot;&quot;</span>
    <span class="c1"># Your solution here</span>
    <span class="k">pass</span>


<span class="kn">from</span><span class="w"> </span><span class="nn">nams.solutions.io</span><span class="w"> </span><span class="kn">import</span> <span class="n">test_graph_integrity</span>

<span class="n">test_graph_integrity</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>
</code></pre></div>

</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="other-text-formats">Other text formats</h2>
<p>CSV files and <code>pandas</code> DataFrames
give us a convenient way to store graph data,
and if possible, do insist with your data collaborators
that they provide you with graph data that are in this format.
If they don't, however, no sweat!
After all, Python is super versatile.</p>
<p>In this ebook, we have loaded data in
from non-CSV sources,
sometimes by parsing text files raw,
sometimes by treating special characters as delimiters in a CSV-like file,
and sometimes by resorting to parsing JSON.</p>
<p>You can see other examples of how we load data
by browsing through the source file of <code>load_data.py</code>
and studying how we construct graph objects.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="solutions">Solutions</h2>
<p>The solutions to this chapter's exercises are below</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">nams.solutions</span><span class="w"> </span><span class="kn">import</span> <span class="n">io</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">inspect</span>

<span class="nb">print</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">getsource</span><span class="p">(</span><span class="n">io</span><span class="p">))</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_subarea output_stream output_stdout output_text">
<pre>
<code>"""Solutions to I/O chapter"""


def filter_graph(G, minimum_num_trips):
    """
    Filter the graph such that
    only edges that have minimum_num_trips or more
    are present.
    """
    G_filtered = G.copy()
    for u, v, d in G.edges(data=True):
        if d["num_trips"] &lt; minimum_num_trips:
            G_filtered.remove_edge(u, v)
    return G_filtered


def test_graph_integrity(G):
    """Test integrity of raw Divvy graph."""
    assert len(G.nodes()) == 300
    assert len(G.edges()) == 44422

</code>
</pre>
</div>
</div>
</div>
</div>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/ericmjl" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/ericmjl" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://linkedin.com/in/ericmjl" target="_blank" rel="noopener" title="linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["instant"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      
        <script src="https://hypothes.is/embed.js"></script>
      
    
  </body>
</html>