# We use Azure Pipelines to continuously test code.
# Azure is preferred because they have unlimited minutes for projects.
# Thus, we can use Azure for continuous integration testing of the content.
# For deploy, we will use GitHub actions, which runs only on push to master.

trigger:
- pr

pool:
  vmImage: 'ubuntu-latest'

steps:
- bash: echo "##vso[task.prependpath]$CONDA/bin"
  displayName: Add conda to PATH

- script: bash scripts/ci/build_environment.sh
  displayName: Build conda environment

- script: bash scripts/ci/build_leanpub.sh
  displayName: Build LeanPub book contents

- script: bash scripts/ci/build_website.sh
  displayName: Build website
