
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://ericmjl.github.io/Network-Analysis-Made-Simple/04-advanced/01-bipartite/">
      
      
        <link rel="prev" href="../../03-practical/02-testing/">
      
      
        <link rel="next" href="../02-linalg/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.7">
    
    
      
        <title>Chapter 9: Bipartite Graphs - Network Analysis Made Simple</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/nb_mods.css">
    
      <link rel="stylesheet" href="../../css/apidocs.css">
    
      <link rel="stylesheet" href="../../css/ansi-colours.css">
    
      <link rel="stylesheet" href="../../css/jupyter-cells.css">
    
      <link rel="stylesheet" href="../../css/pandas-dataframe.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Network Analysis Made Simple" class="md-header__button md-logo" aria-label="Network Analysis Made Simple" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M96 0C43 0 0 43 0 96v320c0 53 43 96 96 96h320c17.7 0 32-14.3 32-32s-14.3-32-32-32v-64c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H96m0 384h256v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32m32-240c0-8.8 7.2-16 16-16h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16m16 48h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Network Analysis Made Simple
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Chapter 9: Bipartite Graphs
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ericmjl/Network-Analysis-Made-Simple" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    ericmjl/Network-Analysis-Made-Simple
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Network Analysis Made Simple" class="md-nav__button md-logo" aria-label="Network Analysis Made Simple" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M96 0C43 0 0 43 0 96v320c0 53 43 96 96 96h320c17.7 0 32-14.3 32-32s-14.3-32-32-32v-64c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H96m0 384h256v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32m32-240c0-8.8 7.2-16 16-16h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16m16 48h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16"/></svg>

    </a>
    Network Analysis Made Simple
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ericmjl/Network-Analysis-Made-Simple" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    ericmjl/Network-Analysis-Made-Simple
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Network Analysis Made Simple
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Network Analysis Made Simple
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Preface
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Preface
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-preface/01-setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-preface/02-prereqs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Prerequisites
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-preface/03-goals/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Learning Goals
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Section 1: Introduction
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Section 1: Introduction
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01-introduction/01-graphs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chapter 1: Introduction to Graphs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01-introduction/02-networkx-intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chapter 2: The NetworkX API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01-introduction/03-viz/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chapter 3: Graph Visualization
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Section 2: Algorithms
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Section 2: Algorithms
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02-algorithms/01-hubs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chapter 4: Hubs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02-algorithms/02-paths/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chapter 5: Paths
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02-algorithms/03-structures/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chapter 6: Structures
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Section 3: Practical Matters
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Section 3: Practical Matters
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../03-practical/01-io/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chapter 7: Graph I/O
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../03-practical/02-testing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chapter 8: Testing
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Section 4: Advanced Topics
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Section 4: Advanced Topics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Chapter 9: Bipartite Graphs
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Chapter 9: Bipartite Graphs
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-are-bipartite-graphs" class="md-nav__link">
    <span class="md-ellipsis">
      What are bipartite graphs?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What are bipartite graphs?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rules-for-bipartite-graphs" class="md-nav__link">
    <span class="md-ellipsis">
      Rules for bipartite graphs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#applications-of-bipartite-graphs" class="md-nav__link">
    <span class="md-ellipsis">
      Applications of bipartite graphs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dataset" class="md-nav__link">
    <span class="md-ellipsis">
      Dataset
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dataset">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#visualize-the-crime-network" class="md-nav__link">
    <span class="md-ellipsis">
      Visualize the crime network
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-extract-each-node-set" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise: Extract each node set
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bipartite-graph-projections" class="md-nav__link">
    <span class="md-ellipsis">
      Bipartite Graph Projections
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bipartite Graph Projections">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#computing-graph-projections" class="md-nav__link">
    <span class="md-ellipsis">
      Computing graph projections
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-find-the-crimes-that-have-the-most-shared-connections-with-other-crimes" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise: find the crime(s) that have the most shared connections with other crimes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-find-the-individuals-that-have-the-most-shared-connections-with-other-individuals" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise: find the individual(s) that have the most shared connections with other individuals
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#weighted-projection" class="md-nav__link">
    <span class="md-ellipsis">
      Weighted Projection
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Weighted Projection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise-find-the-people-that-can-help-with-investigating-a-crimes-person" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise: Find the people that can help with investigating a crime's person.
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#degree-centrality" class="md-nav__link">
    <span class="md-ellipsis">
      Degree Centrality
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Degree Centrality">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise-what-is-the-denominator-for-bipartite-graphs" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise: What is the denominator for bipartite graphs?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-which-persons-are-implicated-in-the-most-number-of-crimes" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise: Which persons are implicated in the most number of crimes?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solutions" class="md-nav__link">
    <span class="md-ellipsis">
      Solutions
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02-linalg/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chapter 10: Linear Algebra
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03-stats/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chapter 11: Statistical Inference
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Section 5: Case Studies
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Section 5: Case Studies
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../05-casestudies/01-gameofthrones/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chapter 12: Game of Thrones
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../05-casestudies/02-airport/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chapter 13: Airport Network
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../learn-more/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Further Learning
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Development
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../devdocs/style/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Style Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-are-bipartite-graphs" class="md-nav__link">
    <span class="md-ellipsis">
      What are bipartite graphs?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What are bipartite graphs?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rules-for-bipartite-graphs" class="md-nav__link">
    <span class="md-ellipsis">
      Rules for bipartite graphs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#applications-of-bipartite-graphs" class="md-nav__link">
    <span class="md-ellipsis">
      Applications of bipartite graphs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dataset" class="md-nav__link">
    <span class="md-ellipsis">
      Dataset
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dataset">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#visualize-the-crime-network" class="md-nav__link">
    <span class="md-ellipsis">
      Visualize the crime network
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-extract-each-node-set" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise: Extract each node set
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bipartite-graph-projections" class="md-nav__link">
    <span class="md-ellipsis">
      Bipartite Graph Projections
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bipartite Graph Projections">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#computing-graph-projections" class="md-nav__link">
    <span class="md-ellipsis">
      Computing graph projections
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-find-the-crimes-that-have-the-most-shared-connections-with-other-crimes" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise: find the crime(s) that have the most shared connections with other crimes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-find-the-individuals-that-have-the-most-shared-connections-with-other-individuals" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise: find the individual(s) that have the most shared connections with other individuals
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#weighted-projection" class="md-nav__link">
    <span class="md-ellipsis">
      Weighted Projection
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Weighted Projection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise-find-the-people-that-can-help-with-investigating-a-crimes-person" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise: Find the people that can help with investigating a crime's person.
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#degree-centrality" class="md-nav__link">
    <span class="md-ellipsis">
      Degree Centrality
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Degree Centrality">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise-what-is-the-denominator-for-bipartite-graphs" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise: What is the denominator for bipartite graphs?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-which-persons-are-implicated-in-the-most-number-of-crimes" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise: Which persons are implicated in the most number of crimes?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solutions" class="md-nav__link">
    <span class="md-ellipsis">
      Solutions
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>Chapter 9: Bipartite Graphs</h1>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script>
(function() {
  function addWidgetsRenderer() {
    var requireJsScript = document.createElement('script');
    requireJsScript.src = 'https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js';

    var mimeElement = document.querySelector('script[type="application/vnd.jupyter.widget-view+json"]');
    var jupyterWidgetsScript = document.createElement('script');
    var widgetRendererSrc = 'https://unpkg.com/@jupyter-widgets/html-manager@*/dist/embed-amd.js';
    var widgetState;

    // Fallback for older version:
    try {
      widgetState = mimeElement && JSON.parse(mimeElement.innerHTML);

      if (widgetState && (widgetState.version_major < 2 || !widgetState.version_major)) {
        widgetRendererSrc = 'jupyter-js-widgets@*/dist/embed.js';
      }
    } catch(e) {}

    jupyterWidgetsScript.src = widgetRendererSrc;

    document.body.appendChild(requireJsScript);
    document.body.appendChild(jupyterWidgetsScript);
  }

  document.addEventListener('DOMContentLoaded', addWidgetsRenderer);
}());
</script>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="https://mybinder.org/v2/gh/ericmjl/Network-Analysis-Made-Simple/master?urlpath=lab%2Ftree%2Fnotebooks%2F04-advanced%2F01-bipartite.ipynb"><img alt="Binder" src="https://mybinder.org/badge_logo.svg" /></a></p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="o">%</span><span class="n">load_ext</span> <span class="n">autoreload</span>
<span class="o">%</span><span class="n">autoreload</span> <span class="mi">2</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
<span class="o">%</span><span class="n">config</span> <span class="n">InlineBackend</span><span class="o">.</span><span class="n">figure_format</span> <span class="o">=</span> <span class="s1">&#39;retina&#39;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">warnings</span>

<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
</code></pre></div>

</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="introduction">Introduction</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">IPython.display</span><span class="w"> </span><span class="kn">import</span> <span class="n">YouTubeVideo</span>

<span class="n">YouTubeVideo</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;BYOK12I9vgI&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s2">&quot;100%&quot;</span><span class="p">)</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_html rendered_html output_subarea output_execute_result">
<iframe allowfullscreen="" frameborder="0" height="300" src="https://www.youtube.com/embed/BYOK12I9vgI" width="100%"></iframe>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In this chapter, we will look at bipartite graphs and their applications.</p>
<h2 id="what-are-bipartite-graphs">What are bipartite graphs?</h2>
<p>As the name suggests,
bipartite have two (bi) node partitions (partite).
In other words, we can assign nodes to one of the two partitions.
(By contrast, all of the graphs that we have seen before are <em>unipartite</em>:
they only have a single partition.)</p>
<h3 id="rules-for-bipartite-graphs">Rules for bipartite graphs</h3>
<p>With unipartite graphs, you might remember a few rules that apply.</p>
<p>Firstly, nodes and edges belong to a <em>set</em>.
This means the node set contains only unique members,
i.e. no node can be duplicated.
The same applies for the edge set.</p>
<p>On top of those two basic rules, bipartite graphs add an additional rule:
Edges can only occur between nodes of <strong>different</strong> partitions.
In other words, nodes within the same partition 
are not allowed to be connected to one another.</p>
<h3 id="applications-of-bipartite-graphs">Applications of bipartite graphs</h3>
<p>Where do we see bipartite graphs being used?
Here's one that is very relevant to e-commerce,
which touches our daily lives:</p>
<p>&gt; We can model customer purchases of products using a bipartite graph.
&gt; Here, the two node sets are <strong>customer</strong> nodes and <strong>product</strong> nodes,
&gt; and edges indicate that a customer <span class="arithmatex"><span class="MathJax_Preview">C</span><script type="math/tex">C</script></span> purchased a product <span class="arithmatex"><span class="MathJax_Preview">P</span><script type="math/tex">P</script></span>.</p>
<p>On the basis of this graph, we can do interesting analyses,
such as finding customers that are similar to one another
on the basis of their shared product purchases.</p>
<p>Can you think of other situations
where a bipartite graph model can be useful?</p>
<h2 id="dataset">Dataset</h2>
<p>Here's another application in crime analysis,
which is relevant to the example that we will use in this chapter:</p>
<p>&gt; This bipartite network contains persons
&gt; who appeared in at least one crime case 
&gt; as either a suspect, a victim, a witness 
&gt; or both a suspect and victim at the same time. 
&gt; A left node represents a person and a right node represents a crime. 
&gt; An edge between two nodes shows that 
&gt; the left node was involved in the crime 
&gt; represented by the right node.</p>
<p>This crime dataset was also sourced from Konect.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">nams</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_data</span> <span class="k">as</span> <span class="n">cf</span>

<span class="n">G</span> <span class="o">=</span> <span class="n">cf</span><span class="o">.</span><span class="n">load_crime_network</span><span class="p">()</span>
<span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="s2">&quot;degree&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">degree</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</code></pre></div>

</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If you inspect the nodes,
you will see that they contain a special metadata keyword: <code>bipartite</code>.
This is a special keyword that NetworkX can use 
to identify nodes of a given partition.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="visualize-the-crime-network">Visualize the crime network</h3>
<p>To help us get our bearings right, let's visualize the crime network.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">nxviz</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">nv</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>
<span class="n">nv</span><span class="o">.</span><span class="n">circos</span><span class="p">(</span>
    <span class="n">G</span><span class="p">,</span>
    <span class="n">sort_by</span><span class="o">=</span><span class="s2">&quot;degree&quot;</span><span class="p">,</span>
    <span class="n">group_by</span><span class="o">=</span><span class="s2">&quot;bipartite&quot;</span><span class="p">,</span>
    <span class="n">node_color_by</span><span class="o">=</span><span class="s2">&quot;bipartite&quot;</span><span class="p">,</span>
    <span class="n">node_enc_kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;size_scale&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span>
<span class="p">)</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_text output_subarea output_execute_result">
<pre>
<code>&lt;Axes: &gt;</code>
</pre>
</div>
</div>
<div class="output_area">
<div class="output_png output_subarea">
<img alt="No description has been provided for this image" height="559" src="output_8_1.png" width="558"/>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="exercise-extract-each-node-set">Exercise: Extract each node set</h3>
<p>A useful thing to be able to do
is to extract each partition's node set.
This will become handy when interacting with
NetworkX's bipartite algorithms later on.</p>
<p>&gt; Write a function that extracts all of the nodes 
&gt; from specified node partition.
&gt; It should also raise a plain Exception
&gt; if no nodes exist in that specified partition.
&gt; (as a precuation against users putting in invalid partition names).</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">networkx</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">nx</span>


<span class="k">def</span><span class="w"> </span><span class="nf">extract_partition_nodes</span><span class="p">(</span><span class="n">G</span><span class="p">:</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">,</span> <span class="n">partition</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="n">nodeset</span> <span class="o">=</span> <span class="p">[</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">_______</span> <span class="k">if</span> <span class="n">____________</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">_____________</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No nodes exist in the partition </span><span class="si">{</span><span class="n">partition</span><span class="si">}</span><span class="s2">!&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">nodeset</span>


<span class="kn">from</span><span class="w"> </span><span class="nn">nams.solutions.bipartite</span><span class="w"> </span><span class="kn">import</span> <span class="n">extract_partition_nodes</span>

<span class="c1"># Uncomment the next line to see the answer.</span>
<span class="c1"># extract_partition_nodes??</span>
</code></pre></div>

</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="bipartite-graph-projections">Bipartite Graph Projections</h2>
<p>In a bipartite graph, one task that can be useful to do
is to calculate the projection of a graph onto one of its nodes.</p>
<p>What do we mean by the "projection of a graph"?
It is best visualized using this figure:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">nams.solutions.bipartite</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">draw_bipartite_graph_example</span><span class="p">,</span>
    <span class="n">bipartite_example_graph</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nxviz</span><span class="w"> </span><span class="kn">import</span> <span class="n">annotate</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="n">bG</span> <span class="o">=</span> <span class="n">bipartite_example_graph</span><span class="p">()</span>
<span class="n">pG</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">bipartite</span><span class="o">.</span><span class="n">projection</span><span class="o">.</span><span class="n">projected_graph</span><span class="p">(</span><span class="n">bG</span><span class="p">,</span> <span class="s2">&quot;abcd&quot;</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">draw_bipartite_graph_example</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">sca</span><span class="p">(</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">annotate</span><span class="o">.</span><span class="n">parallel_labels</span><span class="p">(</span><span class="n">bG</span><span class="p">,</span> <span class="n">group_by</span><span class="o">=</span><span class="s2">&quot;bipartite&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">sca</span><span class="p">(</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">annotate</span><span class="o">.</span><span class="n">arc_labels</span><span class="p">(</span><span class="n">pG</span><span class="p">)</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_png output_subarea">
<img alt="No description has been provided for this image" height="288" src="output_12_0.png" width="643"/>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>As shown in the figure above, we start first with a bipartite graph with two node sets,
the "alphabet" set and the "numeric" set.
The projection of this bipartite graph onto the "alphabet" node set
is a graph that is constructed such that it only contains the "alphabet" nodes,
and edges join the "alphabet" nodes because they share a connection to a "numeric" node.
The red edge on the right
is basically the red path traced on the left.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="computing-graph-projections">Computing graph projections</h3>
<p>How does one compute graph projections using NetworkX?
Turns out, NetworkX has a <code>bipartite</code> submodule,
which gives us all of the facilities that we need
to interact with bipartite algorithms.</p>
<p>First of all, we need to check that the graph
is indeed a bipartite graph.
NetworkX provides a function for us to do so:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">networkx.algorithms</span><span class="w"> </span><span class="kn">import</span> <span class="n">bipartite</span>

<span class="n">bipartite</span><span class="o">.</span><span class="n">is_bipartite</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_text output_subarea output_execute_result">
<pre>
<code>True</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now that we've confirmed that the graph is indeed bipartite,
we can use the NetworkX bipartite submodule functions
to generate the bipartite projection onto one of the node partitions.</p>
<p>First off, we need to extract nodes from a particular partition.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="n">person_nodes</span> <span class="o">=</span> <span class="n">extract_partition_nodes</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="s2">&quot;person&quot;</span><span class="p">)</span>
<span class="n">crime_nodes</span> <span class="o">=</span> <span class="n">extract_partition_nodes</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="s2">&quot;crime&quot;</span><span class="p">)</span>
</code></pre></div>

</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Next, we can compute the projection:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="n">person_graph</span> <span class="o">=</span> <span class="n">bipartite</span><span class="o">.</span><span class="n">projected_graph</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">person_nodes</span><span class="p">)</span>
<span class="n">crime_graph</span> <span class="o">=</span> <span class="n">bipartite</span><span class="o">.</span><span class="n">projected_graph</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">crime_nodes</span><span class="p">)</span>
</code></pre></div>

</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>And with that, we have our projected graphs!</p>
<p>Go ahead and inspect them:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="nb">list</span><span class="p">(</span><span class="n">person_graph</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">))[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_text output_subarea output_execute_result">
<pre>
<code>[('p1', 'p336', {}),
 ('p1', 'p756', {}),
 ('p1', 'p93', {}),
 ('p1', 'p694', {}),
 ('p2', 'p660', {})]</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="nb">list</span><span class="p">(</span><span class="n">crime_graph</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">))[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_text output_subarea output_execute_result">
<pre>
<code>[('c1', 'c4', {}),
 ('c1', 'c2', {}),
 ('c1', 'c3', {}),
 ('c2', 'c4', {}),
 ('c2', 'c3', {})]</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now, what is the <em>interpretation</em> of these projected graphs?</p>
<ul>
<li>For <code>person_graph</code>, we have found <em>individuals who are linked by shared participation (whether witness or suspect) in a crime.</em></li>
<li>For <code>crime_graph</code>, we have found <em>crimes that are linked by shared involvement by people.</em></li>
</ul>
<p>Just by this graph, we already can find out pretty useful information.
Let's use an exercise that leverages what you already know
to extract useful information from the projected graph.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="exercise-find-the-crimes-that-have-the-most-shared-connections-with-other-crimes">Exercise: find the crime(s) that have the most shared connections with other crimes</h3>
<p>&gt; Find crimes that are most similar to one another
&gt; on the basis of the number of shared connections to individuals.</p>
<p><em>Hint: This is a degree centrality problem!</em></p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>


<span class="k">def</span><span class="w"> </span><span class="nf">find_most_similar_crimes</span><span class="p">(</span><span class="n">cG</span><span class="p">:</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Find the crimes that are most similar to other crimes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dcs</span> <span class="o">=</span> <span class="n">______________</span>
    <span class="k">return</span> <span class="n">___________________</span>


<span class="kn">from</span><span class="w"> </span><span class="nn">nams.solutions.bipartite</span><span class="w"> </span><span class="kn">import</span> <span class="n">find_most_similar_crimes</span>

<span class="n">find_most_similar_crimes</span><span class="p">(</span><span class="n">crime_graph</span><span class="p">)</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_text output_subarea output_execute_result">
<pre>
<code>c110    0.136364
c47     0.070909
c23     0.070909
c95     0.063636
c14     0.061818
c352    0.060000
c432    0.060000
c417    0.058182
c525    0.058182
c160    0.058182
dtype: float64</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="exercise-find-the-individuals-that-have-the-most-shared-connections-with-other-individuals">Exercise: find the individual(s) that have the most shared connections with other individuals</h3>
<p>&gt; Now do the analogous thing for individuals!</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">find_most_similar_people</span><span class="p">(</span><span class="n">pG</span><span class="p">:</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Find the persons that are most similar to other persons.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dcs</span> <span class="o">=</span> <span class="n">______________</span>
    <span class="k">return</span> <span class="n">___________________</span>


<span class="kn">from</span><span class="w"> </span><span class="nn">nams.solutions.bipartite</span><span class="w"> </span><span class="kn">import</span> <span class="n">find_most_similar_people</span>

<span class="n">find_most_similar_people</span><span class="p">(</span><span class="n">person_graph</span><span class="p">)</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_text output_subarea output_execute_result">
<pre>
<code>p425    0.061594
p2      0.057971
p356    0.053140
p56     0.039855
p695    0.039855
p497    0.036232
p715    0.035024
p10     0.033816
p815    0.032609
p74     0.030193
dtype: float64</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="weighted-projection">Weighted Projection</h2>
<p>Though we were able to find out which graphs were connected with one another,
we did not record in the resulting projected graph
the <strong>strength</strong> by which the two nodes were connected.
To preserve this information, we need another function:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="n">weighted_person_graph</span> <span class="o">=</span> <span class="n">bipartite</span><span class="o">.</span><span class="n">weighted_projected_graph</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">person_nodes</span><span class="p">)</span>
<span class="nb">list</span><span class="p">(</span><span class="n">weighted_person_graph</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">))[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_text output_subarea output_execute_result">
<pre>
<code>[('p1', 'p336', {'weight': 1}),
 ('p1', 'p756', {'weight': 1}),
 ('p1', 'p93', {'weight': 1}),
 ('p1', 'p694', {'weight': 1}),
 ('p2', 'p660', {'weight': 1})]</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="exercise-find-the-people-that-can-help-with-investigating-a-crimes-person">Exercise: Find the people that can help with investigating a <code>crime</code>'s <code>person</code>.</h3>
<p>Let's pretend that we are a detective trying to solve a crime,
and that we right now need to find other individuals
who were not implicated in the same <em>exact</em> crime as an individual was,
but who might be able to give us information about that individual
because they were implicated in other crimes with that individual.</p>
<p>&gt; Implement a function that takes in a bipartite graph <code>G</code>, a string <code>person</code> and a string <code>crime</code>,
&gt; and returns a list of other <code>person</code>s that were <strong>not</strong> implicated in the <code>crime</code>,
&gt; but were connected to the <code>person</code> via other crimes.
&gt; It should return a <em>ranked list</em>,
&gt; based on the <strong>number of shared crimes</strong> (from highest to lowest)
&gt; because the ranking will help with triage.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="nb">list</span><span class="p">(</span><span class="n">G</span><span class="o">.</span><span class="n">neighbors</span><span class="p">(</span><span class="s2">&quot;p1&quot;</span><span class="p">))</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_text output_subarea output_execute_result">
<pre>
<code>['c1', 'c2', 'c3', 'c4']</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">find_connected_persons</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">person</span><span class="p">,</span> <span class="n">crime</span><span class="p">):</span>
    <span class="c1"># Step 0: Check that the given &quot;person&quot; and &quot;crime&quot; are connected.</span>
    <span class="k">if</span> <span class="n">_____________________________</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Graph does not have a connection between </span><span class="si">{</span><span class="n">person</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">crime</span><span class="si">}</span><span class="s2">!&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Step 1: calculate weighted projection for person nodes.</span>
    <span class="n">person_nodes</span> <span class="o">=</span> <span class="n">____________________________________</span>
    <span class="n">person_graph</span> <span class="o">=</span> <span class="n">bipartite</span><span class="o">.</span><span class="n">________________________</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">____________</span><span class="p">)</span>

    <span class="c1"># Step 2: Find neighbors of the given `person` node in projected graph.</span>
    <span class="n">candidate_neighbors</span> <span class="o">=</span> <span class="n">___________________________________</span>

    <span class="c1"># Step 3: Remove candidate neighbors from the set if they are implicated in the given crime.</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">G</span><span class="o">.</span><span class="n">neighbors</span><span class="p">(</span><span class="n">crime</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">________________________</span><span class="p">:</span>
            <span class="n">_____________________________</span>

    <span class="c1"># Step 4: Rank-order the candidate neighbors by number of shared connections.</span>
    <span class="n">_________</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1">## You might need a for-loop here</span>
    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">__________</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;________&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>


<span class="kn">from</span><span class="w"> </span><span class="nn">nams.solutions.bipartite</span><span class="w"> </span><span class="kn">import</span> <span class="n">find_connected_persons</span>

<span class="n">find_connected_persons</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="s2">&quot;p2&quot;</span><span class="p">,</span> <span class="s2">&quot;c10&quot;</span><span class="p">)</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>node</th>
<th>weight</th>
</tr>
</thead>
<tbody>
<tr>
<th>8</th>
<td>p67</td>
<td>4</td>
</tr>
<tr>
<th>24</th>
<td>p338</td>
<td>2</td>
</tr>
<tr>
<th>27</th>
<td>p356</td>
<td>2</td>
</tr>
<tr>
<th>37</th>
<td>p361</td>
<td>2</td>
</tr>
<tr>
<th>3</th>
<td>p211</td>
<td>1</td>
</tr>
<tr>
<th>1</th>
<td>p665</td>
<td>1</td>
</tr>
<tr>
<th>0</th>
<td>p660</td>
<td>1</td>
</tr>
<tr>
<th>6</th>
<td>p4</td>
<td>1</td>
</tr>
<tr>
<th>7</th>
<td>p287</td>
<td>1</td>
</tr>
<tr>
<th>9</th>
<td>p578</td>
<td>1</td>
</tr>
<tr>
<th>10</th>
<td>p495</td>
<td>1</td>
</tr>
<tr>
<th>11</th>
<td>p90</td>
<td>1</td>
</tr>
<tr>
<th>4</th>
<td>p309</td>
<td>1</td>
</tr>
<tr>
<th>5</th>
<td>p499</td>
<td>1</td>
</tr>
<tr>
<th>2</th>
<td>p286</td>
<td>1</td>
</tr>
<tr>
<th>14</th>
<td>p690</td>
<td>1</td>
</tr>
<tr>
<th>13</th>
<td>p186</td>
<td>1</td>
</tr>
<tr>
<th>12</th>
<td>p360</td>
<td>1</td>
</tr>
<tr>
<th>15</th>
<td>p661</td>
<td>1</td>
</tr>
<tr>
<th>19</th>
<td>p439</td>
<td>1</td>
</tr>
<tr>
<th>20</th>
<td>p820</td>
<td>1</td>
</tr>
<tr>
<th>17</th>
<td>p471</td>
<td>1</td>
</tr>
<tr>
<th>16</th>
<td>p781</td>
<td>1</td>
</tr>
<tr>
<th>22</th>
<td>p563</td>
<td>1</td>
</tr>
<tr>
<th>21</th>
<td>p304</td>
<td>1</td>
</tr>
<tr>
<th>25</th>
<td>p806</td>
<td>1</td>
</tr>
<tr>
<th>23</th>
<td>p587</td>
<td>1</td>
</tr>
<tr>
<th>26</th>
<td>p603</td>
<td>1</td>
</tr>
<tr>
<th>28</th>
<td>p498</td>
<td>1</td>
</tr>
<tr>
<th>29</th>
<td>p223</td>
<td>1</td>
</tr>
<tr>
<th>18</th>
<td>p300</td>
<td>1</td>
</tr>
<tr>
<th>30</th>
<td>p320</td>
<td>1</td>
</tr>
<tr>
<th>31</th>
<td>p39</td>
<td>1</td>
</tr>
<tr>
<th>33</th>
<td>p475</td>
<td>1</td>
</tr>
<tr>
<th>32</th>
<td>p782</td>
<td>1</td>
</tr>
<tr>
<th>34</th>
<td>p608</td>
<td>1</td>
</tr>
<tr>
<th>35</th>
<td>p401</td>
<td>1</td>
</tr>
<tr>
<th>36</th>
<td>p528</td>
<td>1</td>
</tr>
<tr>
<th>38</th>
<td>p48</td>
<td>1</td>
</tr>
<tr>
<th>39</th>
<td>p305</td>
<td>1</td>
</tr>
<tr>
<th>40</th>
<td>p449</td>
<td>1</td>
</tr>
<tr>
<th>41</th>
<td>p773</td>
<td>1</td>
</tr>
<tr>
<th>42</th>
<td>p710</td>
<td>1</td>
</tr>
<tr>
<th>43</th>
<td>p5</td>
<td>1</td>
</tr>
<tr>
<th>44</th>
<td>p716</td>
<td>1</td>
</tr>
<tr>
<th>45</th>
<td>p620</td>
<td>1</td>
</tr>
<tr>
<th>46</th>
<td>p768</td>
<td>1</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="degree-centrality">Degree Centrality</h2>
<p>The degree centrality metric is something we can calculate for bipartite graphs.
Recall that the degree centrality metric is the number of neighbors of a node
divided by the total number of <em>possible</em> neighbors.</p>
<p>In a unipartite graph, the denominator can be the total number of nodes less one
(if self-loops are not allowed)
or simply the total number of nodes (if self loops <em>are</em> allowed).</p>
<h3 id="exercise-what-is-the-denominator-for-bipartite-graphs">Exercise: What is the denominator for bipartite graphs?</h3>
<p>Think about it for a moment, then write down your answer.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">nams.solutions.bipartite</span><span class="w"> </span><span class="kn">import</span> <span class="n">bipartite_degree_centrality_denominator</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nams.functions</span><span class="w"> </span><span class="kn">import</span> <span class="n">render_html</span>

<span class="n">render_html</span><span class="p">(</span><span class="n">bipartite_degree_centrality_denominator</span><span class="p">())</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_html rendered_html output_subarea output_execute_result">
<p>The total number of neighbors that a node can <em>possibly</em> have
is the number of nodes in the other partition.
This comes naturally from the definition of a bipartite graph,
where nodes can <em>only</em> be connected to nodes in the other partition.</p>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="exercise-which-persons-are-implicated-in-the-most-number-of-crimes">Exercise: Which <code>persons</code> are implicated in the most number of crimes?</h3>
<p>&gt; Find the <code>persons</code> (singular or plural) who are connected to the most number of crimes.</p>
<p>To do so, you will need to use <code>nx.bipartite.degree_centrality</code>,
rather than the regular <code>nx.degree_centrality</code> function.</p>
<p><code>nx.bipartite.degree_centrality</code> requires that you pass in
a node set from one of the partitions
so that it can correctly partition nodes on the other set.
What is returned, though, is the degree centrality
for nodes in both sets.
Here is an example to show you how the function is used:</p>
<div class="highlight"><pre><span></span><code><span class="n">dcs</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">bipartite</span><span class="o">.</span><span class="n">degree_centrality</span><span class="p">(</span><span class="n">my_graph</span><span class="p">,</span> <span class="n">nodes_from_one_partition</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">find_most_crime_person</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">person_nodes</span><span class="p">):</span>
    <span class="n">dcs</span> <span class="o">=</span> <span class="n">__________________________</span>
    <span class="k">return</span> <span class="n">___________________________</span>


<span class="kn">from</span><span class="w"> </span><span class="nn">nams.solutions.bipartite</span><span class="w"> </span><span class="kn">import</span> <span class="n">find_most_crime_person</span>

<span class="n">find_most_crime_person</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">person_nodes</span><span class="p">)</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_text output_subarea output_execute_result">
<pre>
<code>'p815'</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="solutions">Solutions</h2>
<p>Here are the solutions to the exercises above.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">nams.solutions</span><span class="w"> </span><span class="kn">import</span> <span class="n">bipartite</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">inspect</span>

<span class="nb">print</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">getsource</span><span class="p">(</span><span class="n">bipartite</span><span class="p">))</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_subarea output_stream output_stdout output_text">
<pre>
<code>import networkx as nx
import pandas as pd
from nams.functions import render_html


def extract_partition_nodes(G: nx.Graph, partition: str):
    nodeset = [n for n, d in G.nodes(data=True) if d["bipartite"] == partition]
    if len(nodeset) == 0:
        raise Exception(f"No nodes exist in the partition {partition}!")
    return nodeset


def bipartite_example_graph():
    bG = nx.Graph()
    bG.add_nodes_from("abcd", bipartite="letters")
    bG.add_nodes_from(range(1, 4), bipartite="numbers")
    bG.add_edges_from([("a", 1), ("b", 1), ("b", 3), ("c", 2), ("c", 3), ("d", 1)])

    return bG


def draw_bipartite_graph_example():
    """Draw an example bipartite graph and its corresponding projection."""
    import matplotlib.pyplot as plt
    import nxviz as nv
    from nxviz import annotate, plots, highlights

    fig, ax = plt.subplots(nrows=1, ncols=2, figsize=(8, 4))
    plt.sca(ax[0])
    bG = bipartite_example_graph()
    nv.parallel(bG, group_by="bipartite", node_color_by="bipartite")
    annotate.parallel_group(bG, group_by="bipartite", y_offset=-0.5)
    highlights.parallel_edge(bG, "a", 1, group_by="bipartite")
    highlights.parallel_edge(bG, "b", 1, group_by="bipartite")

    pG = nx.bipartite.projected_graph(bG, nodes=list("abcd"))
    plt.sca(ax[1])
    nv.arc(pG)
    highlights.arc_edge(pG, "a", "b")
    return ax


def find_most_similar_crimes(cG: nx.Graph):
    """
    Find the crimes that are most similar to other crimes.
    """
    dcs = pd.Series(nx.degree_centrality(cG))
    return dcs.sort_values(ascending=False).head(10)


def find_most_similar_people(pG: nx.Graph):
    """
    Find the persons that are most similar to other persons.
    """
    dcs = pd.Series(nx.degree_centrality(pG))
    return dcs.sort_values(ascending=False).head(10)


def find_connected_persons(G, person, crime):
    """Answer to exercise on people implicated in crimes"""
    # Step 0: Check that the given "person" and "crime" are connected.
    if not G.has_edge(person, crime):
        raise ValueError(
            f"Graph does not have a connection between {person} and {crime}!"
        )

    # Step 1: calculate weighted projection for person nodes.
    person_nodes = extract_partition_nodes(G, "person")
    person_graph = nx.bipartite.weighted_projected_graph(G, person_nodes)

    # Step 2: Find neighbors of the given `person` node in projected graph.
    candidate_neighbors = set(person_graph.neighbors(person))

    # Step 3: Remove candidate neighbors from the set if they are implicated in the given crime.
    for p in G.neighbors(crime):
        if p in candidate_neighbors:
            candidate_neighbors.remove(p)

    # Step 4: Rank-order the candidate neighbors by number of shared connections.
    data = []
    for nbr in candidate_neighbors:
        data.append(dict(node=nbr, weight=person_graph.edges[person, nbr]["weight"]))
    return pd.DataFrame(data).sort_values("weight", ascending=False)


def bipartite_degree_centrality_denominator():
    """Answer to bipartite graph denominator for degree centrality."""

    ans = """
The total number of neighbors that a node can _possibly_ have
is the number of nodes in the other partition.
This comes naturally from the definition of a bipartite graph,
where nodes can _only_ be connected to nodes in the other partition.
"""
    return ans


def find_most_crime_person(G, person_nodes):
    dcs = (
        pd.Series(nx.bipartite.degree_centrality(G, person_nodes))
        .sort_values(ascending=False)
        .to_frame()
    )
    return dcs.reset_index().query("index.str.contains('p')").iloc[0]["index"]

</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code>
</code></pre></div>

</div>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/ericmjl" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/ericmjl" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://linkedin.com/in/ericmjl" target="_blank" rel="noopener" title="linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["instant"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      
        <script src="https://hypothes.is/embed.js"></script>
      
    
  </body>
</html>